{
	"info": {
		"_postman_id": "studio-rental-api-tests",
		"name": "Studio For Rent - API Tests",
		"description": "Complete API testing collection for Studio Rental Backend - Payment, Review, and Set Design modules",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Register Customer",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    pm.test('Customer registered successfully', () => {",
									"        pm.response.to.have.status(201);",
									"        const response = pm.response.json();",
									"        pm.expect(response.success).to.be.true;",
									"        pm.expect(response.data).to.have.property('email');",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"username\": \"testcustomer\",\n  \"email\": \"customer@test.com\",\n  \"password\": \"Test@1234\",\n  \"fullName\": \"Test Customer\",\n  \"phone\": \"0123456789\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/register/customer",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"register",
								"customer"
							]
						}
					},
					"response": []
				},
				{
					"name": "Login Customer",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    pm.environment.set('customer_token', response.data.accessToken);",
									"    pm.environment.set('customer_refresh_token', response.data.refreshToken);",
									"    pm.test('Login successful', () => {",
									"        pm.expect(response.success).to.be.true;",
									"        pm.expect(response.data).to.have.property('accessToken');",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"username\": \"customer@test.com\",\n  \"password\": \"Test@1234\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "Login Staff",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    pm.environment.set('staff_token', response.data.accessToken);",
									"    pm.test('Staff login successful', () => {",
									"        pm.expect(response.success).to.be.true;",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"username\": \"staff@test.com\",\n  \"password\": \"Staff@1234\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Payment APIs",
			"item": [
				{
					"name": "Create Payment Options",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Payment options created', () => {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response.success).to.be.true;",
									"    pm.expect(response.data).to.have.property('options');",
									"    pm.expect(response.data.options).to.be.an('array');",
									"    if (response.data.options.length > 0) {",
									"        pm.environment.set('payment_link', response.data.options[0].paymentLink);",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/payments/options/:bookingId",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"payments",
								"options",
								":bookingId"
							],
							"variable": [
								{
									"key": "bookingId",
									"value": "{{booking_id}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Single Payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Single payment created', () => {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response.success).to.be.true;",
									"    pm.expect(response.data).to.have.property('payment');",
									"    if (response.data.payment) {",
									"        pm.environment.set('payment_id', response.data.payment._id);",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"percentage\": 30\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/payments/create/:bookingId",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"payments",
								"create",
								":bookingId"
							],
							"variable": [
								{
									"key": "bookingId",
									"value": "{{booking_id}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Payment Status",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Payment status retrieved', () => {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response.success).to.be.true;",
									"    pm.expect(response.data).to.have.property('status');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/payments/status/:paymentId",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"payments",
								"status",
								":paymentId"
							],
							"variable": [
								{
									"key": "paymentId",
									"value": "{{payment_id}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Customer Payment History",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Payment history retrieved', () => {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response.success).to.be.true;",
									"    pm.expect(response.data).to.have.property('payments');",
									"    pm.expect(response.data).to.have.property('pagination');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/payments/history/customer?page=1&limit=10",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"payments",
								"history",
								"customer"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "10"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get My Transactions",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Transactions retrieved', () => {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response.success).to.be.true;",
									"    pm.expect(response.data).to.have.property('transactions');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/payments/my-transactions?page=1&limit=10",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"payments",
								"my-transactions"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "10"
								},
								{
									"key": "status",
									"value": "PAID",
									"disabled": true
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get All Transactions (Staff)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('All transactions retrieved', () => {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response.success).to.be.true;",
									"    pm.expect(response.data).to.have.property('transactions');",
									"    pm.expect(response.data).to.have.property('statistics');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{staff_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/payments/transactions/all?page=1&limit=10",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"payments",
								"transactions",
								"all"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "10"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Transaction By ID",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Transaction details retrieved', () => {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response.success).to.be.true;",
									"    pm.expect(response.data).to.have.property('transaction');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{staff_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/payments/transactions/:transactionId",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"payments",
								"transactions",
								":transactionId"
							],
							"variable": [
								{
									"key": "transactionId",
									"value": "{{payment_id}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Refund (Staff)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Refund created', () => {",
									"    pm.response.to.have.status(201);",
									"    const response = pm.response.json();",
									"    pm.expect(response.success).to.be.true;",
									"    pm.expect(response.data).to.have.property('refund');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{staff_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"reason\": \"Customer requested refund\",\n  \"amount\": 100000\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/payments/refund/:paymentId",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"payments",
								"refund",
								":paymentId"
							],
							"variable": [
								{
									"key": "paymentId",
									"value": "{{payment_id}}"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Review APIs",
			"item": [
				{
					"name": "Create Review",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Review created successfully', () => {",
									"    pm.response.to.have.status(201);",
									"    const response = pm.response.json();",
									"    pm.expect(response.success).to.be.true;",
									"    pm.expect(response.data).to.have.property('_id');",
									"    pm.expect(response.data).to.have.property('rating');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"bookingId\": \"{{booking_id}}\",\n  \"rating\": 5,\n  \"title\": \"Excellent studio!\",\n  \"comment\": \"Very professional service and great equipment. Highly recommended!\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/reviews",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"reviews"
							]
						}
					},
					"response": []
				},
				{
					"name": "List Reviews By Studio",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Reviews list retrieved', () => {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response.success).to.be.true;",
									"    pm.expect(response.data).to.be.an('array');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/reviews/studio/:studioId?limit=20&skip=0",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"reviews",
								"studio",
								":studioId"
							],
							"query": [
								{
									"key": "limit",
									"value": "20"
								},
								{
									"key": "skip",
									"value": "0"
								}
							],
							"variable": [
								{
									"key": "studioId",
									"value": "{{studio_id}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Review For Booking",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Review retrieved', () => {",
									"    const response = pm.response.json();",
									"    if (pm.response.code === 200) {",
									"        pm.expect(response.success).to.be.true;",
									"        pm.expect(response.data).to.have.property('rating');",
									"    } else if (pm.response.code === 404) {",
									"        pm.expect(response.success).to.be.false;",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/reviews/booking/:bookingId",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"reviews",
								"booking",
								":bookingId"
							],
							"variable": [
								{
									"key": "bookingId",
									"value": "{{booking_id}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Review - Invalid Rating",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Invalid rating rejected', () => {",
									"    pm.response.to.have.status(400);",
									"    const response = pm.response.json();",
									"    pm.expect(response.success).to.be.false;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"bookingId\": \"{{booking_id}}\",\n  \"rating\": 6,\n  \"comment\": \"Test invalid rating\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/reviews",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"reviews"
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Review - Missing Required Fields",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Missing fields rejected', () => {",
									"    pm.response.to.have.status(400);",
									"    const response = pm.response.json();",
									"    pm.expect(response.success).to.be.false;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"rating\": 5\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/reviews",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"reviews"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Set Design APIs",
			"item": [
				{
					"name": "Get Active Set Designs",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Active designs retrieved', () => {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response.success).to.be.true;",
									"    pm.expect(response.data).to.have.property('designs');",
									"    if (response.data.designs.length > 0) {",
									"        pm.environment.set('design_id', response.data.designs[0]._id);",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/set-designs/active",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"set-designs",
								"active"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Set Design By ID",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Design details retrieved', () => {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response.success).to.be.true;",
									"    pm.expect(response.data).to.have.property('name');",
									"    pm.expect(response.data).to.have.property('price');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/set-designs/:id",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"set-designs",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "{{design_id}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Designs By Category",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Category designs retrieved', () => {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response.success).to.be.true;",
									"    pm.expect(response.data).to.be.an('array');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/set-designs/category/:category",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"set-designs",
								"category",
								":category"
							],
							"variable": [
								{
									"key": "category",
									"value": "modern"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Add Comment (Customer)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Comment added successfully', () => {",
									"    pm.response.to.have.status(201);",
									"    const response = pm.response.json();",
									"    pm.expect(response.success).to.be.true;",
									"    pm.expect(response.message).to.include('bình luận');",
									"    // Save comment ID for like/unlike tests",
									"    // Format: designId_commentIndex (using the last comment added)",
									"    const designId = pm.environment.get('design_id');",
									"    if (response.data && response.data.comments && response.data.comments.length > 0) {",
									"        const lastCommentIndex = response.data.comments.length - 1;",
									"        const commentId = `${designId}_${lastCommentIndex}`;",
									"        pm.environment.set('comment_id', commentId);",
									"        console.log('Saved comment_id:', commentId);",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"message\": \"This design looks amazing! Can I customize colors?\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/set-designs/:id/comments",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"set-designs",
								":id",
								"comments"
							],
							"variable": [
								{
									"key": "id",
									"value": "{{design_id}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Reply to Comment (Customer)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Reply added successfully', () => {",
									"    pm.response.to.have.status(201);",
									"    const response = pm.response.json();",
									"    pm.expect(response.success).to.be.true;",
									"    pm.expect(response.message).to.include('phản hồi');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"message\": \"Yes, absolutely! We can customize the color scheme to match your preference.\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/set-designs/:id/comments/:commentIndex/reply",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"set-designs",
								":id",
								"comments",
								":commentIndex",
								"reply"
							],
							"variable": [
								{
									"key": "id",
									"value": "{{design_id}}"
								},
								{
									"key": "commentIndex",
									"value": "0"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Comment (Customer)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Comment updated successfully', () => {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response.success).to.be.true;",
									"    pm.expect(response.message).to.include('Cập nhật');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"message\": \"Updated: This design is perfect! Love the color scheme.\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/set-designs/:id/comments/:commentIndex",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"set-designs",
								":id",
								"comments",
								":commentIndex"
							],
							"variable": [
								{
									"key": "id",
									"value": "{{design_id}}"
								},
								{
									"key": "commentIndex",
									"value": "0"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Reply",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Reply updated successfully', () => {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response.success).to.be.true;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"message\": \"Updated reply: Yes, we offer full color customization!\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/set-designs/:id/comments/:commentIndex/replies/:replyIndex",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"set-designs",
								":id",
								"comments",
								":commentIndex",
								"replies",
								":replyIndex"
							],
							"variable": [
								{
									"key": "id",
									"value": "{{design_id}}"
								},
								{
									"key": "commentIndex",
									"value": "0"
								},
								{
									"key": "replyIndex",
									"value": "0"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete Reply",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Reply deleted successfully', () => {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response.success).to.be.true;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/set-designs/:id/comments/:commentIndex/replies/:replyIndex",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"set-designs",
								":id",
								"comments",
								":commentIndex",
								"replies",
								":replyIndex"
							],
							"variable": [
								{
									"key": "id",
									"value": "{{design_id}}"
								},
								{
									"key": "commentIndex",
									"value": "0"
								},
								{
									"key": "replyIndex",
									"value": "0"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete Comment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Comment deleted successfully', () => {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response.success).to.be.true;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/set-designs/:id/comments/:commentIndex",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"set-designs",
								":id",
								"comments",
								":commentIndex"
							],
							"variable": [
								{
									"key": "id",
									"value": "{{design_id}}"
								},
								{
									"key": "commentIndex",
									"value": "0"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Add Review (Customer)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Review added successfully', () => {",
									"    pm.response.to.have.status(201);",
									"    const response = pm.response.json();",
									"    pm.expect(response.success).to.be.true;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"rating\": 5,\n  \"comment\": \"Excellent design! Very professional and modern.\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/set-designs/:id/reviews",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"set-designs",
								":id",
								"reviews"
							],
							"variable": [
								{
									"key": "id",
									"value": "{{design_id}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Add Comment - Empty Message",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Empty message rejected', () => {",
									"    pm.response.to.have.status(400);",
									"    const response = pm.response.json();",
									"    pm.expect(response.success).to.be.false;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"message\": \"\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/set-designs/:id/comments",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"set-designs",
								":id",
								"comments"
							],
							"variable": [
								{
									"key": "id",
									"value": "{{design_id}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Add Comment - Too Long",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Too long message rejected', () => {",
									"    pm.response.to.have.status(400);",
									"    const response = pm.response.json();",
									"    pm.expect(response.success).to.be.false;",
									"    pm.expect(response.message).to.include('300');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"message\": \"This is a very long message that exceeds 300 characters. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/set-designs/:id/comments",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"set-designs",
								":id",
								"comments"
							],
							"variable": [
								{
									"key": "id",
									"value": "{{design_id}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Like Comment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Comment liked successfully', () => {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response.success).to.be.true;",
									"    pm.expect(response.message).to.include('thích');",
									"    pm.expect(response.data).to.have.property('likes');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/comments/:commentId/like",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"comments",
								":commentId",
								"like"
							],
							"variable": [
								{
									"key": "commentId",
									"value": "{{comment_id}}",
									"description": "ID của comment cần like"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Unlike Comment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Comment unliked successfully', () => {",
									"    pm.response.to.have.status(200);",
									"    const response = pm.response.json();",
									"    pm.expect(response.success).to.be.true;",
									"    pm.expect(response.message).to.include('bỏ thích');",
									"    pm.expect(response.data).to.have.property('likes');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/comments/:commentId/like",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"comments",
								":commentId",
								"like"
							],
							"variable": [
								{
									"key": "commentId",
									"value": "{{comment_id}}",
									"description": "ID của comment cần unlike"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Like Comment - Invalid ID",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Invalid comment ID rejected', () => {",
									"    pm.response.to.have.status(400);",
									"    const response = pm.response.json();",
									"    pm.expect(response.success).to.be.false;",
									"    pm.expect(response.message).to.include('không hợp lệ');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customer_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/comments/invalid_comment_id_123/like",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"comments",
								"invalid_comment_id_123",
								"like"
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Set Design (Staff)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Design created successfully', () => {",
									"    pm.response.to.have.status(201);",
									"    const response = pm.response.json();",
									"    pm.expect(response.success).to.be.true;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{staff_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Modern Studio Setup\",\n  \"description\": \"Complete modern studio design with professional lighting\",\n  \"price\": 5000000,\n  \"category\": \"modern\",\n  \"images\": [\n    \"https://example.com/image1.jpg\"\n  ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/set-designs",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"set-designs"
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8000",
			"type": "string"
		}
	]
}
